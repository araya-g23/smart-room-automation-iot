<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Login | AutoSmart</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/main.css') }}"
    />
  </head>
  <script>
    // Auto-hide flash messages after 4 seconds
    setTimeout(() => {
      const flashes = document.querySelectorAll(".eg_flash");
      flashes.forEach((flash) => {
        flash.style.opacity = "0";
        flash.style.transform = "translateY(-6px)";
        setTimeout(() => flash.remove(), 300);
      });
    }, 4000);

    function eg_closeFlash(button) {
      const flash = button.parentElement;
      flash.style.opacity = "0";
      flash.style.transform = "translateY(-6px)";
      setTimeout(() => flash.remove(), 300);
    }
  </script>

  <body class="eg_loginPage">
    <div class="eg_loginWrapper">
      <!-- LEFT PANEL -->
      <div class="eg_loginLeft">
        <img
          src="{{ url_for('static', filename='images/logo.png') }}"
          alt="AutoSmart Logo"
          class="eg_loginLogo"
        />
        <h1>Welcome back</h1>
        <p class="eg_loginSub">
          Sign in to manage rooms, monitor sensors, and control smart devices
          securely.
        </p>

        <ul class="eg_loginFeatures">
          <li>✔ Real time sensor monitoring</li>
          <li>✔ Secure device control</li>
          <li>✔ Full audit logging</li>
        </ul>
      </div>

      <!-- RIGHT PANEL -->
      <div class="eg_loginRight">
        {% with messages = get_flashed_messages(with_categories=true) %} {% if
        messages %}
        <div class="eg_flashContainer">
          {% for category, message in messages %}
          <div class="eg_flash eg_flash{{ category|capitalize }}">
            {{ message }}
          </div>
          {% endfor %}
        </div>
        {% endif %} {% endwith %}

        <h2>Access your account</h2>

        <form method="post" class="eg_loginForm">
          <label>Email</label>
          <input type="email" name="email" required />

          <label>Password</label>
          <input type="password" name="password" required />

          <button type="submit" class="eg_btn eg_btnPrimary eg_btnLarge">
            Log in
          </button>

          <div class="eg_authDivider">
            <span>or</span>
          </div>

          <a href="{{ url_for('login_google') }}" class="eg_googleBtn">
            <img
              src="{{ url_for('static', filename='images/google-icon.png') }}"
              alt="Google"
            />
            Continue with Google
          </a>

          <p class="eg_loginFooter">
            No account?
            <a href="{{ url_for('register') }}">Register</a>
          </p>
        </form>
      </div>
    </div>
  </body>
</html>
